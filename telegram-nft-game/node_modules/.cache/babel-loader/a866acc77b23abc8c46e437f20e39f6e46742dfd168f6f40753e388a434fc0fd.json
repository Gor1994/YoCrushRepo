{"ast":null,"code":"var _jsxFileName = \"/home/gor/vozniProjects/NFTTelegramGame/telegram-nft-game/src/Components/Game.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport WalletModal from \"./WalletModal\"; // Import the WalletModal component\nimport ABI from \"../abi.json\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoadingSpinner = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 7\n  }, this);\n};\n_c = LoadingSpinner;\nconst NFTCards = () => {\n  _s();\n  const [nfts, setNfts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [gameStarted, setGameStarted] = useState(false);\n  const [rankings, setRankings] = useState({});\n  const [availableRanks, setAvailableRanks] = useState([]);\n  const [walletAddress, setWalletAddress] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [connectedAccount, setConnectedAccount] = useState(null);\n\n  // Handle redirect and fetch the account from the URL query parameters\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const account = urlParams.get(\"account\");\n    if (account) {\n      console.log(\"User is connected with account:\", account);\n      setConnectedAccount(account);\n\n      // Store the account in localStorage to persist after reloads\n      localStorage.setItem(\"connectedAccount\", account);\n\n      // Optionally remove query parameters from the URL after storing\n      const newUrl = window.location.origin + window.location.pathname;\n      window.history.replaceState({}, document.title, newUrl);\n    } else {\n      // Retrieve from localStorage if available\n      const storedAccount = localStorage.getItem(\"connectedAccount\");\n      if (storedAccount) {\n        setConnectedAccount(storedAccount);\n        console.log(\"User is connected with stored account:\", storedAccount);\n      }\n    }\n  }, []);\n\n  // Handle logout by clearing the state and localStorage\n  const handleLogout = () => {\n    setConnectedAccount(null);\n    localStorage.removeItem(\"connectedAccount\");\n    console.log(\"User disconnected.\");\n  };\n  const backendUrl = \"http://127.0.0.1:3001\"; // Replace with your backend API URL\n  const contractAddress = \"0xC1cCeb5adFE832bb5788Db8F10E8b083C037c89b\"; // Replace with your contract address\n  const customRpcUrl = \"https://rpc2.bahamut.io\"; // Replace with your custom RPC URL\n\n  const provider = new ethers.JsonRpcProvider(customRpcUrl);\n  const hasInitialized = useRef(false);\n  const startNewGame = async () => {\n    if (loading || hasInitialized.current) return;\n    console.log(\"startNewGame called\");\n    hasInitialized.current = true;\n    setLoading(true);\n    setGameStarted(true);\n    try {\n      const response = await axios.get(backendUrl);\n      console.log(\"ðŸš€ ~ startNewGame ~ response:\", response);\n      const parsedNFTs = response.data.nfts.map(nft => ({\n        id: nft.id,\n        metadata: JSON.parse(nft.metadata)\n      }));\n      setNfts(parsedNFTs);\n      await fetchLeaderboard(parsedNFTs);\n      setRankings({});\n      setAvailableRanks([...Array(parsedNFTs.length).keys()].map(i => i + 1));\n    } catch (error) {\n      console.error(\"Error fetching NFTs:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchLeaderboard = async () => {\n    try {\n      const contract = new ethers.Contract(contractAddress, ABI, provider);\n      const rawData = await contract.getLeaderboard(1);\n      const leaderboardData = rawData.map(entry => ({\n        rank: Number(entry[0]),\n        score: Number(entry[1])\n      })).filter(entry => entry.rank !== 0);\n      const leaderboardWithNames = await Promise.all(leaderboardData.map(async entry => {\n        try {\n          const response = await axios.get(`${backendUrl}/nft/${entry.rank}`);\n          const nftName = response.data.name;\n          return {\n            ...entry,\n            name: nftName\n          };\n        } catch (error) {\n          console.error(`Error fetching NFT name for ID ${entry.rank}:`, error);\n          return {\n            ...entry,\n            name: \"Unknown\"\n          };\n        }\n      }));\n      setLeaderboard(leaderboardWithNames);\n    } catch (err) {\n      console.error(\"Error fetching leaderboard:\", err);\n    }\n  };\n  const handleSubmitRanks = async () => {\n    // Ensure wallet is connected\n    if (!connectedAccount) {\n      setError(\"Please connect your wallet first.\");\n      return;\n    }\n\n    // Validate that all NFTs are ranked\n    if (Object.keys(rankings).length !== nfts.length) {\n      setError(\"Please assign ranks to all NFTs.\");\n      return;\n    }\n\n    // Prepare the rankings in the correct format\n    const ids = Object.entries(rankings).sort(([, rankA], [, rankB]) => rankA - rankB) // Sort by rank\n    .map(([index]) => {\n      const nft = nfts[Number(index)];\n      if (!nft || !nft.id) {\n        throw new Error(`Missing or undefined ID for NFT at index ${index}`);\n      }\n      return nft.id; // Collect NFT IDs\n    });\n    try {\n      setLoading(true);\n      setError(\"\");\n\n      // Connect to MetaMask and get the signer\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n\n      // Instantiate the contract\n      const contract = new ethers.Contract(contractAddress, ABI, signer);\n\n      // Send the transaction\n      console.log(\"Submitting rankings:\", ids);\n      const tx = await contract.submit(ids); // Assuming `submit` is the contract method\n      await tx.wait(); // Wait for the transaction to be mined\n\n      alert(\"Rankings submitted successfully!\");\n    } catch (err) {\n      console.error(\"Error submitting rankings:\", err);\n      setError(\"Failed to submit rankings. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const connectMetaMask = async () => {\n    const isMetaMaskInstalled = typeof window.ethereum !== \"undefined\";\n    if (isMetaMaskInstalled) {\n      try {\n        // Attempt to connect MetaMask directly\n        const accounts = await window.ethereum.request({\n          method: \"eth_requestAccounts\"\n        });\n        const connectedAddress = accounts[0];\n        console.log(\"Connected account:\", connectedAddress);\n\n        // Update state and localStorage\n        setWalletAddress(connectedAddress);\n        localStorage.setItem(\"connectedAccount\", connectedAddress);\n\n        // Handle successful connection\n        alert(`Connected to account: ${connectedAddress}`);\n      } catch (err) {\n        console.error(\"MetaMask connection failed:\", err);\n        setError(\"MetaMask connection failed. Please try again.\");\n      }\n    } else {\n      // Redirect to MetaMask app with your dApp deep link\n      const dAppUrl = \"7ece-37-157-219-187.ngrok-free.app\"; // Your dApp base domain (no protocol)\n      const metamaskDeepLink = `https://metamask.app.link/dapp/${dAppUrl}`;\n      alert(\"Redirecting to MetaMask. Please return to the app after connecting.\");\n      window.location.href = metamaskDeepLink;\n\n      // Poll for connection when redirected back to the app\n      const interval = setInterval(async () => {\n        if (typeof window.ethereum !== \"undefined\") {\n          try {\n            const accounts = await window.ethereum.request({\n              method: \"eth_accounts\"\n            });\n            if (accounts && accounts.length > 0) {\n              const connectedAddress = accounts[0];\n              console.log(\"Connected account after return:\", connectedAddress);\n\n              // Update state and localStorage\n              setWalletAddress(connectedAddress);\n              localStorage.setItem(\"connectedAccount\", connectedAddress);\n              clearInterval(interval);\n\n              // Handle connected account\n              alert(`Connected to account: ${connectedAddress}`);\n            }\n          } catch (err) {\n            console.error(\"Error checking MetaMask accounts:\", err);\n          }\n        } else {\n          console.warn(\"Waiting for MetaMask to be installed.\");\n        }\n      }, 2000);\n    }\n  };\n  const connectWalletConnect = async () => {\n    const walletConnectProvider = new WalletConnectProvider({\n      rpc: {\n        1: customRpcUrl\n      }\n    });\n    try {\n      await walletConnectProvider.enable();\n      const web3Provider = new ethers.BrowserProvider(walletConnectProvider);\n      const signer = await web3Provider.getSigner();\n      const address = await signer.getAddress();\n      setWalletAddress(address);\n      setError(\"\");\n      setIsModalOpen(false);\n    } catch (err) {\n      console.error(\"Error connecting WalletConnect:\", err);\n      setError(\"Failed to connect WalletConnect. Please try again.\");\n    }\n  };\n  const handleAssignRank = (index, rank) => {\n    setRankings(prev => ({\n      ...prev,\n      [index]: rank\n    }));\n    setAvailableRanks(prev => prev.filter(r => r !== rank));\n  };\n  useEffect(() => {\n    if (typeof window.ethereum !== \"undefined\") {\n      window.ethereum.on(\"accountsChanged\", accounts => {\n        if (accounts.length > 0) {\n          setWalletAddress(accounts[0]);\n        } else {\n          setWalletAddress(\"\");\n          setError(\"Wallet disconnected.\");\n        }\n      });\n      window.ethereum.on(\"chainChanged\", () => {\n        window.location.reload();\n      });\n    }\n  }, []);\n  useEffect(() => {\n    startNewGame();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"nft-cards-container\",\n    children: [loading && /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 23\n    }, this), !loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wallet-connection\",\n        children: [walletAddress ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Connected: \", walletAddress]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"logout-button\",\n            children: \"Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsModalOpen(true),\n          className: \"connect-wallet-button\",\n          children: \"Connect Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 19\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(WalletModal, {\n        isOpen: isModalOpen,\n        onClose: () => setIsModalOpen(false),\n        onConnectMetaMask: connectMetaMask,\n        onConnectWalletConnect: connectWalletConnect\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cards-wrapper\",\n        children: nfts.map((nft, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `nft-card ${rankings[index] ? \"inactive-card\" : \"\"}`,\n          style: {\n            opacity: rankings[index] ? 0.5 : 1,\n            pointerEvents: rankings[index] ? \"none\" : \"auto\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: nft.metadata.name || `NFT ${index + 1}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: nft.metadata.image,\n            alt: nft.metadata.name || \"NFT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rank-buttons\",\n            children: !rankings[index] && availableRanks.map(rank => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAssignRank(index, rank),\n              disabled: rankings[index] === rank || !!Object.values(rankings).find(r => r === rank),\n              children: `Rank ${rank}`\n            }, rank, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 27\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 21\n          }, this), rankings[index] && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Assigned Rank: \", rankings[index]]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 41\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 19\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmitRanks,\n        className: \"submit-ranks-button\",\n        children: \"Submit Rankings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"leaderboard-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Leaderboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"leaderboard-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Id\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Score\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: leaderboard.map((entry, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.rank\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 357,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: entry.score\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 25\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 23\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 9\n  }, this);\n};\n_s(NFTCards, \"kj00XOFel02Eue80DeNuwUDuWkw=\");\n_c2 = NFTCards;\nexport default NFTCards;\nvar _c, _c2;\n$RefreshReg$(_c, \"LoadingSpinner\");\n$RefreshReg$(_c2, \"NFTCards\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","ethers","WalletConnectProvider","WalletModal","ABI","jsxDEV","_jsxDEV","Fragment","_Fragment","LoadingSpinner","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","NFTCards","_s","nfts","setNfts","loading","setLoading","gameStarted","setGameStarted","rankings","setRankings","availableRanks","setAvailableRanks","walletAddress","setWalletAddress","error","setError","leaderboard","setLeaderboard","isModalOpen","setIsModalOpen","connectedAccount","setConnectedAccount","urlParams","URLSearchParams","window","location","search","account","get","console","log","localStorage","setItem","newUrl","origin","pathname","history","replaceState","document","title","storedAccount","getItem","handleLogout","removeItem","backendUrl","contractAddress","customRpcUrl","provider","JsonRpcProvider","hasInitialized","startNewGame","current","response","parsedNFTs","data","map","nft","id","metadata","JSON","parse","fetchLeaderboard","Array","length","keys","i","contract","Contract","rawData","getLeaderboard","leaderboardData","entry","rank","Number","score","filter","leaderboardWithNames","Promise","all","nftName","name","err","handleSubmitRanks","Object","ids","entries","sort","rankA","rankB","index","Error","BrowserProvider","ethereum","signer","getSigner","tx","submit","wait","alert","connectMetaMask","isMetaMaskInstalled","accounts","request","method","connectedAddress","dAppUrl","metamaskDeepLink","href","interval","setInterval","clearInterval","warn","connectWalletConnect","walletConnectProvider","rpc","enable","web3Provider","address","getAddress","handleAssignRank","prev","r","on","reload","onClick","isOpen","onClose","onConnectMetaMask","onConnectWalletConnect","style","opacity","pointerEvents","src","image","alt","disabled","values","find","_c2","$RefreshReg$"],"sources":["/home/gor/vozniProjects/NFTTelegramGame/telegram-nft-game/src/Components/Game.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { ethers } from \"ethers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport WalletModal from \"./WalletModal\"; // Import the WalletModal component\nimport ABI from \"../abi.json\";\nconst LoadingSpinner = () => {\n    return (\n      <div className=\"loading-overlay\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  };\n  \nconst NFTCards = () => {\n    const [nfts, setNfts] = useState([]);\n    const [loading, setLoading] = useState(false);\n    const [gameStarted, setGameStarted] = useState(false);\n    const [rankings, setRankings] = useState({});\n    const [availableRanks, setAvailableRanks] = useState([]);\n    const [walletAddress, setWalletAddress] = useState(\"\");\n    const [error, setError] = useState(\"\");\n    const [leaderboard, setLeaderboard] = useState([]);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [connectedAccount, setConnectedAccount] = useState(null);\n\n    // Handle redirect and fetch the account from the URL query parameters\n    useEffect(() => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const account = urlParams.get(\"account\");\n  \n      if (account) {\n        console.log(\"User is connected with account:\", account);\n        setConnectedAccount(account);\n  \n        // Store the account in localStorage to persist after reloads\n        localStorage.setItem(\"connectedAccount\", account);\n  \n        // Optionally remove query parameters from the URL after storing\n        const newUrl = window.location.origin + window.location.pathname;\n        window.history.replaceState({}, document.title, newUrl);\n      } else {\n        // Retrieve from localStorage if available\n        const storedAccount = localStorage.getItem(\"connectedAccount\");\n        if (storedAccount) {\n          setConnectedAccount(storedAccount);\n          console.log(\"User is connected with stored account:\", storedAccount);\n        }\n      }\n    }, []);\n  \n    // Handle logout by clearing the state and localStorage\n    const handleLogout = () => {\n      setConnectedAccount(null);\n      localStorage.removeItem(\"connectedAccount\");\n      console.log(\"User disconnected.\");\n    };\n  \n    const backendUrl = \"http://127.0.0.1:3001\"; // Replace with your backend API URL\n    const contractAddress = \"0xC1cCeb5adFE832bb5788Db8F10E8b083C037c89b\"; // Replace with your contract address\n    const customRpcUrl = \"https://rpc2.bahamut.io\"; // Replace with your custom RPC URL\n\n    const provider = new ethers.JsonRpcProvider(customRpcUrl);\n\n    const hasInitialized = useRef(false);\n\n    const startNewGame = async () => {\n        if (loading || hasInitialized.current) return;\n        console.log(\"startNewGame called\");\n        hasInitialized.current = true;\n        setLoading(true);\n        setGameStarted(true);\n\n        try {\n            const response = await axios.get(backendUrl);\n            console.log(\"ðŸš€ ~ startNewGame ~ response:\", response);\n            const parsedNFTs = response.data.nfts.map((nft) => ({\n                id: nft.id,\n                metadata: JSON.parse(nft.metadata),\n            }));\n            setNfts(parsedNFTs);\n\n            await fetchLeaderboard(parsedNFTs);\n\n            setRankings({});\n            setAvailableRanks([...Array(parsedNFTs.length).keys()].map((i) => i + 1));\n        } catch (error) {\n            console.error(\"Error fetching NFTs:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchLeaderboard = async () => {\n        try {\n            const contract = new ethers.Contract(contractAddress, ABI, provider);\n\n            const rawData = await contract.getLeaderboard(1);\n            const leaderboardData = rawData\n                .map((entry) => ({\n                    rank: Number(entry[0]),\n                    score: Number(entry[1]),\n                }))\n                .filter((entry) => entry.rank !== 0);\n\n            const leaderboardWithNames = await Promise.all(\n                leaderboardData.map(async (entry) => {\n                    try {\n                        const response = await axios.get(`${backendUrl}/nft/${entry.rank}`);\n                        const nftName = response.data.name;\n                        return { ...entry, name: nftName };\n                    } catch (error) {\n                        console.error(`Error fetching NFT name for ID ${entry.rank}:`, error);\n                        return { ...entry, name: \"Unknown\" };\n                    }\n                })\n            );\n\n            setLeaderboard(leaderboardWithNames);\n        } catch (err) {\n            console.error(\"Error fetching leaderboard:\", err);\n        }\n    };\n\n    const handleSubmitRanks = async () => {\n        // Ensure wallet is connected\n        if (!connectedAccount) {\n            setError(\"Please connect your wallet first.\");\n            return;\n        }\n    \n        // Validate that all NFTs are ranked\n        if (Object.keys(rankings).length !== nfts.length) {\n            setError(\"Please assign ranks to all NFTs.\");\n            return;\n        }\n    \n        // Prepare the rankings in the correct format\n        const ids = Object.entries(rankings)\n            .sort(([, rankA], [, rankB]) => rankA - rankB) // Sort by rank\n            .map(([index]) => {\n                const nft = nfts[Number(index)];\n                if (!nft || !nft.id) {\n                    throw new Error(`Missing or undefined ID for NFT at index ${index}`);\n                }\n                return nft.id; // Collect NFT IDs\n            });\n    \n        try {\n            setLoading(true);\n            setError(\"\");\n    \n            // Connect to MetaMask and get the signer\n            const provider = new ethers.BrowserProvider(window.ethereum);\n            const signer = await provider.getSigner();\n    \n            // Instantiate the contract\n            const contract = new ethers.Contract(contractAddress, ABI, signer);\n    \n            // Send the transaction\n            console.log(\"Submitting rankings:\", ids);\n            const tx = await contract.submit(ids); // Assuming `submit` is the contract method\n            await tx.wait(); // Wait for the transaction to be mined\n    \n            alert(\"Rankings submitted successfully!\");\n        } catch (err) {\n            console.error(\"Error submitting rankings:\", err);\n            setError(\"Failed to submit rankings. Please try again.\");\n        } finally {\n            setLoading(false);\n        }\n    };\n    \n    const connectMetaMask = async () => {\n        const isMetaMaskInstalled = typeof window.ethereum !== \"undefined\";\n    \n        if (isMetaMaskInstalled) {\n            try {\n                // Attempt to connect MetaMask directly\n                const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n                const connectedAddress = accounts[0];\n                console.log(\"Connected account:\", connectedAddress);\n    \n                // Update state and localStorage\n                setWalletAddress(connectedAddress);\n                localStorage.setItem(\"connectedAccount\", connectedAddress);\n    \n                // Handle successful connection\n                alert(`Connected to account: ${connectedAddress}`);\n            } catch (err) {\n                console.error(\"MetaMask connection failed:\", err);\n                setError(\"MetaMask connection failed. Please try again.\");\n            }\n        } else {\n            // Redirect to MetaMask app with your dApp deep link\n            const dAppUrl = \"7ece-37-157-219-187.ngrok-free.app\"; // Your dApp base domain (no protocol)\n            const metamaskDeepLink = `https://metamask.app.link/dapp/${dAppUrl}`;\n    \n            alert(\"Redirecting to MetaMask. Please return to the app after connecting.\");\n            window.location.href = metamaskDeepLink;\n    \n            // Poll for connection when redirected back to the app\n            const interval = setInterval(async () => {\n                if (typeof window.ethereum !== \"undefined\") {\n                    try {\n                        const accounts = await window.ethereum.request({ method: \"eth_accounts\" });\n                        if (accounts && accounts.length > 0) {\n                            const connectedAddress = accounts[0];\n                            console.log(\"Connected account after return:\", connectedAddress);\n    \n                            // Update state and localStorage\n                            setWalletAddress(connectedAddress);\n                            localStorage.setItem(\"connectedAccount\", connectedAddress);\n                            clearInterval(interval);\n    \n                            // Handle connected account\n                            alert(`Connected to account: ${connectedAddress}`);\n                        }\n                    } catch (err) {\n                        console.error(\"Error checking MetaMask accounts:\", err);\n                    }\n                } else {\n                    console.warn(\"Waiting for MetaMask to be installed.\");\n                }\n            }, 2000);\n        }\n    };\n\n    const connectWalletConnect = async () => {\n        const walletConnectProvider = new WalletConnectProvider({\n            rpc: {\n                1: customRpcUrl,\n            },\n        });\n\n        try {\n            await walletConnectProvider.enable();\n            const web3Provider = new ethers.BrowserProvider(walletConnectProvider);\n            const signer = await web3Provider.getSigner();\n            const address = await signer.getAddress();\n            setWalletAddress(address);\n            setError(\"\");\n            setIsModalOpen(false);\n        } catch (err) {\n            console.error(\"Error connecting WalletConnect:\", err);\n            setError(\"Failed to connect WalletConnect. Please try again.\");\n        }\n    };\n\n    const handleAssignRank = (index, rank) => {\n        setRankings((prev) => ({ ...prev, [index]: rank }));\n        setAvailableRanks((prev) => prev.filter((r) => r !== rank));\n    };\n\n    useEffect(() => {\n        if (typeof window.ethereum !== \"undefined\") {\n            window.ethereum.on(\"accountsChanged\", (accounts) => {\n                if (accounts.length > 0) {\n                    setWalletAddress(accounts[0]);\n                } else {\n                    setWalletAddress(\"\");\n                    setError(\"Wallet disconnected.\");\n                }\n            });\n\n            window.ethereum.on(\"chainChanged\", () => {\n                window.location.reload();\n            });\n        }\n    }, []);\n\n    useEffect(() => {\n        startNewGame();\n    }, []);\n\n    return (\n        <div className=\"nft-cards-container\">\n          {loading && <LoadingSpinner />}\n          {!loading ? (\n            <>\n              <div className=\"wallet-connection\">\n                {walletAddress ? (\n                  <>\n                    <p>Connected: {walletAddress}</p>\n                    <button onClick={handleLogout} className=\"logout-button\">\n                      Log Out\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={() => setIsModalOpen(true)}\n                    className=\"connect-wallet-button\"\n                  >\n                    Connect Wallet\n                  </button>\n                )}\n                {error && <p className=\"error-message\">{error}</p>}\n              </div>\n      \n              <WalletModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                onConnectMetaMask={connectMetaMask}\n                onConnectWalletConnect={connectWalletConnect}\n              />\n      \n              <div className=\"cards-wrapper\">\n                {nfts.map((nft, index) => (\n                  <div\n                    className={`nft-card ${rankings[index] ? \"inactive-card\" : \"\"}`}\n                    key={index}\n                    style={{\n                      opacity: rankings[index] ? 0.5 : 1,\n                      pointerEvents: rankings[index] ? \"none\" : \"auto\",\n                    }}\n                  >\n                    <h3>{nft.metadata.name || `NFT ${index + 1}`}</h3>\n                    <img\n                      src={nft.metadata.image}\n                      alt={nft.metadata.name || \"NFT\"}\n                    />\n                    <div className=\"rank-buttons\">\n                      {!rankings[index] &&\n                        availableRanks.map((rank) => (\n                          <button\n                            key={rank}\n                            onClick={() => handleAssignRank(index, rank)}\n                            disabled={\n                              rankings[index] === rank ||\n                              !!Object.values(rankings).find((r) => r === rank)\n                            }\n                          >\n                            {`Rank ${rank}`}\n                          </button>\n                        ))}\n                    </div>\n                    {rankings[index] && <p>Assigned Rank: {rankings[index]}</p>}\n                  </div>\n                ))}\n              </div>\n              <button onClick={handleSubmitRanks} className=\"submit-ranks-button\">\n                Submit Rankings\n              </button>\n              <div className=\"leaderboard-container\">\n                <h2>Leaderboard</h2>\n                <table className=\"leaderboard-table\">\n                  <thead>\n                    <tr>\n                      <th>Id</th>\n                      <th>Name</th>\n                      <th>Score</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {leaderboard.map((entry, index) => (\n                      <tr key={index}>\n                        <td>{entry.rank}</td>\n                        <td>{entry.name}</td>\n                        <td>{entry.score}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </>\n          ) : null}\n        </div>\n      );\n      \n};\n\nexport default NFTCards;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}